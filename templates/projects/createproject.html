{% load static %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en">

	<!-- begin::Head -->
	<head>
		<meta charset="utf-8" />
		<title>Create Project</title>
		<meta name="description" content="Latest updates and statistic charts">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">

		<!--begin::Web font -->
		<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
		<script>
			WebFont.load({
            google: {"families":["Poppins:300,400,500,600,700","Roboto:300,400,500,600,700"]},
            active: function() {
                sessionStorage.fonts = true;
            }
          });
        </script>

		<!--end::Web font -->

		<!--begin::Global Theme Styles -->
		<link href="{% static 'assets/vendors/base/vendors.bundle.css'%}" rel="stylesheet" type="text/css" />

		<!--RTL version:<link href="../assets/vendors/base/vendors.bundle.rtl.css" rel="stylesheet" type="text/css" />-->
		<link href="{% static 'assets/demo/default/base/style.bundle.css' %}" rel="stylesheet" type="text/css" />

		<!--RTL version:<link href="../assets/demo/default/base/style.bundle.rtl.css" rel="stylesheet" type="text/css" />-->

		<!--end::Global Theme Styles -->

		<!--begin::Page Vendors Styles -->
		<link href="{% static 'assets/vendors/custom/fullcalendar/fullcalendar.bundle.css' %}" rel="stylesheet" type="text/css" />

		<!--RTL version:<link href="../assets/vendors/custom/fullcalendar/fullcalendar.bundle.rtl.css" rel="stylesheet" type="text/css" />-->

		<!--end::Page Vendors Styles -->
		<link rel="shortcut icon" href="{% static 'assets/demo/default/media/img/logo/favicon.ico' %}" />
	</head>

	<!-- end::Head -->

	<!-- begin::Body -->
	<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--fixed m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">

		<!-- begin:: Page -->
		<div class="m-grid m-grid--hor m-grid--root m-page">

			<!-- BEGIN: Header -->
			<header id="m_header" class="m-grid__item    m-header " m-minimize-offset="200" m-minimize-mobile-offset="200">
				<div class="m-container m-container--fluid m-container--full-height">
					<div class="m-stack m-stack--ver m-stack--desktop">

						<!-- BEGIN: Brand -->
						<div class="m-stack__item m-brand  m-brand--skin-dark ">
							<div class="m-stack m-stack--ver m-stack--general">
								<div class="m-stack__item m-stack__item--middle m-brand__logo">
									<a href="javascript:void(0)" class="m-brand__logo-wrapper">
										<img style="width: 133px;" alt=""  src="{% static 'assets/demo/default/media/img/logo/mylogo.png' %}">
									</a>
								</div>
								<div class="m-stack__item m-stack__item--middle m-brand__tools">

									<!-- BEGIN: Left Aside Minimize Toggle -->
									<a href="javascript:;" id="m_aside_left_minimize_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-desktop-inline-block  ">
										<span></span>
									</a>

									<!-- END -->

									<!-- BEGIN: Responsive Aside Left Menu Toggler -->
									<a href="javascript:;" id="m_aside_left_offcanvas_toggle" class="m-brand__icon m-brand__toggler m-brand__toggler--left m--visible-tablet-and-mobile-inline-block">
										<span></span>
									</a>

									<!-- END -->

								
								</div>
							</div>
						</div>

						<!-- END: Brand -->
						
					</div>
				</div>
			</header>

			<!-- END: Header -->

			<!-- begin::Body -->
			<div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">

				<!-- BEGIN: Left Aside -->
				<button class="m-aside-left-close  m-aside-left-close--skin-dark " id="m_aside_left_close_btn"><i class="la la-close"></i></button>
				<div id="m_aside_left" class="m-grid__item	m-aside-left  m-aside-left--skin-dark ">

					<!-- BEGIN: Aside Menu -->
					<div id="m_ver_menu" class="m-aside-menu  m-aside-menu--skin-dark m-aside-menu--submenu-skin-dark " m-menu-vertical="1" m-menu-scrollable="1" m-menu-dropdown-timeout="500" style="position: relative;">
						<ul class="m-menu__nav  m-menu__nav--dropdown-submenu-arrow ">
							<li class="m-menu__item m-menu__item--active m-menu__item--submenu" aria-haspopup="true" m-menu-submenu-toggle="hover"><a href="javascript:;" class="m-menu__link m-menu__toggle"><i class="m-menu__link-icon flaticon-layers"></i><span class="m-menu__link-text">Project</span><i class="m-menu__ver-arrow la la-angle-right"></i></a>
								<div class="m-menu__submenu "><span class="m-menu__arrow"></span>
									<ul class="m-menu__subnav">
										<li class="m-menu__item m-menu__item--active " aria-haspopup="true"><a href="{% url 'createproject'%}" class="m-menu__link "><i class="m-menu__link-bullet fa fa-plus"><span></span></i><span class="m-menu__link-text">Create Project</span></a></li>
										<li class="m-menu__item " aria-haspopup="true"><a href="{% url 'index' %}" class="m-menu__link "><i class="m-menu__link-bullet m-menu__link-bullet--dot"><span></span></i><span class="m-menu__link-text">View Project</span></a></li>
										
									</ul>
								</div>
							</li>
							<li class="m-menu__item " aria-haspopup="true"><a href="{% url 'single_review'%}" class="m-menu__link "><i class="m-menu__link-icon fa fa-pencil-alt"></i><span class="m-menu__link-title"> <span class="m-menu__link-wrap"> <span class="m-menu__link-text">Single Review</span>
											<span class="m-menu__link-badge"></span> </span></span></a></li>
							<form action="{% url 'logout' %}" id="logout" method="post">
												{% csrf_token %}
												<input type="hidden">
											</form>
							<li class="m-menu__item" aria-haspopup="true"><a style="cursor:pointer;" onclick="logout()" class="m-menu__link "><i class="m-menu__link-icon fa fa-sign-out-alt">
								</i><span class="m-menu__link-title"> <span class="m-menu__link-wrap"> <span class="m-menu__link-text">Logout</span>
											<span class="m-menu__link-badge"></span> </span></span></a></li>
							
							
						</ul>
					</div>

					<!-- END: Aside Menu -->
				</div>

				<!-- END: Left Aside -->
				<div class="m-grid__item m-grid__item--fluid m-wrapper">

					<!-- BEGIN: Subheader --
					<div class="m-subheader ">
						<div class="d-flex align-items-center">
							<div class="mr-auto">
								<h3 class="m-subheader__title ">Create Project</h3>
				</div>
						</div>
					</div>

					 END: Subheader -->
					<div class="m-content">
						<div class="row">
							<div class="col-lg-12">
								<div class="m-portlet m-portlet--full-height">

							<!--begin: Portlet Head-->
							<div class="m-portlet__head">
							<div class="m-portlet__head-caption">
							<div class="m-portlet__head-title">
							<h3 class="m-portlet__head-text">
							Create Project
							</h3>
							</div>
							</div>
							<div class="m-portlet__head-tools">
							<ul class="m-portlet__nav">
							<li class="m-portlet__nav-item">
							<a href="#" data-toggle="m-tooltip" class="m-portlet__nav-link m-portlet__nav-link--icon" data-direction="left" data-width="auto" title="Get help with filling up this form">
							<i class="flaticon-info m--icon-font-size-lg3"></i>
							</a>
							</li>
							</ul>
							</div>
							</div>

							<!--end: Portlet Head-->

								<!--begin: Form Wizard-->
							<div class="m-wizard m-wizard--2 m-wizard--success" id="m_wizard">

							<!--begin: Message container -->
							<div class="m-portlet__padding-x">

							<!-- Here you can put a message or alert -->
							</div>

							<!--end: Message container -->

							<!--begin: Form Wizard Head -->
							<div class="m-wizard__head m-portlet__padding-x">

							<!--begin: Form Wizard Progress -->
								<div class="m-wizard__progress">
									<div class="progress">
										<div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div>

							<!--end: Form Wizard Progress -->

							<!--begin: Form Wizard Nav -->
								<div class="m-wizard__nav">
									<div class="m-wizard__steps">
										<div class="m-wizard__step m-wizard__step--current" m-wizard-target="m_wizard_form_step_1">
											<a href="#" class="m-wizard__step-number">
												<span>
												<i class="fa  flaticon-placeholder"></i>
												</span>
											</a>
											<div class="m-wizard__step-info">
												<div class="m-wizard__step-title">
												1. Add Project Details
												</div>
											</div>
										</div>
										<div class="m-wizard__step" m-wizard-target="m_wizard_form_step_2">
											<a href="#" class="m-wizard__step-number">
												<span>
												<i class="fa  flaticon-layers"></i>
												</span>
											</a>
											<div class="m-wizard__step-info">
												<div class="m-wizard__step-title">
												2. Select Aspects
												</div>
											</div>
										</div>
									</div>
								</div>

							<!--end: Form Wizard Nav -->
							</div>

							<!--end: Form Wizard Head -->

							<!--begin: Form Wizard Form-->
							<div class="m-wizard__form">
								<form class="m-form" id="m-form" method="POST" enctype="multipart/form-data">

							<!--begin: Form Body -->
									<div class="m-portlet__body">

							<!--begin: Form Wizard Step 1-->
									<div class="m-wizard__form-step m-wizard__form-step--current" id="m_wizard_form_step_1">
								<div class="row">
								<div class="col-xl-8 offset-xl-2">
								<div class="m-form__section m-form__section--first">
								{% csrf_token%}
											<div class="m-portlet__body">
												<div class="m-form__section m-form__section--first">
													<div class="form-group m-form__group">
														<label for="example_input_full_name">Project Name:</label>
	                                                    <!-- <input name="user" class="form-control m-input" value="{{request.user}}" type="hidden"> -->

														{{ form.name|add_class:"form-control m-input"|attr:"placeholder:Enter Project name"|attr:"id:pname"|attr:"type:text" }}
													</div>
													<div class="form-group m-form__group">
														<label>Project Description:</label>
	                                                    <!-- <input type="text" class="form-control m-input" placeholder="Enter Project Description"> -->
	                                                    {{ form.description|add_class:"form-control m-input"|attr:"placeholder:Enter Project Description"|attr:"id:description"|attr:"type:text" }}
													</div>
													<div class="form-group m-form__group">
														<label for="example_input_full_name">Key Value:</label>
	                                                    <!-- <input type="text" class="form-control m-input" placeholder="Enter Key Value"> -->
	                                                    {{ form.key|add_class:"form-control m-input"|attr:"placeholder:Enter Key Value"|attr:"id:key"|attr:"type:text" }}
													</div>
													<div class="form-group m-form__group">
													<label for="exampleInputEmail1">File Browser</label>
													<div></div>
													<div class="custom-file col-md-4">
	                                                    <!-- <input type="file" class="custom-file-input" id="customFile"> -->
	                                                    {{ form.document|add_class:"form-control m-input"|attr:"id:customFile"|attr:"type:file" }}
														<label class="custom-file-label" for="customFile">Choose file</label>
													</div>
												</div>
												</div>
											</div>
								</div>
								</div>
							</div>
						</div>

							<!--end: Form Wizard Step 1-->

							<!--begin: Form Wizard Step 2-->
							<div class="m-wizard__form-step" id="m_wizard_form_step_2">
							<div class="row">
							<div class="col-xl-8 offset-xl-2">
							<div class="m-form__section m-form__section--first">
							<div class="form-group m-form__group row">
							</div>
							</div>
							<div class="m-form__section">
							<div class="form-group m-form__group row">
							<div class="col-lg-12 m-form__group-sub">
							<label class="form-control-label">Aspects:</label>
							{{ form.aspects|add_class:"form-control m-input"|attr:"placeholder:Enter aspects..."|attr:"id:aspects"|attr:"type:text" }}
							</div>
							</div>
							</div>
							</div>
							</div>
							</div>

							<!--end: Form Wizard Step 2-->

							</div>

							<!--end: Form Body -->

							<!--begin: Form Actions -->
							<div class="m-portlet__foot m-portlet__foot--fit m--margin-top-40">
							<div class="m-form__actions">
							<div class="row">
								<div class="col-lg-2"></div>
							<div class="col-lg-4 m--align-left">
								<button class="btn btn-secondary m-btn m-btn--custom m-btn--icon" data-wizard-action="prev">
									<span>
										<i class="la la-arrow-left"></i>&nbsp;&nbsp;
										<span>Back</span>
									</span>
								</button>
							</div>
							<div class="col-lg-4 m--align-right">
							<a href="#" id="submit" class="btn btn-primary m-btn m-btn--custom m-btn--icon" data-wizard-action="submit">
							<span>
							<i class="la la-check"></i>&nbsp;&nbsp;
							<span>Submit</span>
							</span>
							</a>
							<a href="#" id="next" class="btn btn-warning m-btn m-btn--custom m-btn--icon" data-wizard-action="next">
							<span>
							<span>Save & Continue</span>&nbsp;&nbsp;
							<i class="la la-arrow-right"></i>
							</span>
							</a>
							</div>
							<div class="col-lg-2"></div>
							</div>
							</div>
							</div>

							<!--end: Form Actions -->
							</form>
							</div>

							<!--end: Form Wizard Form-->
							</div>

							<!--end: Form Wizard-->
							</div>

							</div>
							
						</div>
					</div>
					
				</div>
			</div>

			<!-- end:: Body -->

			<!-- begin::Footer -->
			<footer class="m-grid__item		m-footer ">
				<div class="m-container m-container--fluid m-container--full-height m-page__container">
					<div class="m-stack m-stack--flex-tablet-and-mobile m-stack--ver m-stack--desktop">
						<div class="m-stack__item m-stack__item--left m-stack__item--middle m-stack__item--last">
							<span class="m-footer__copyright">
								2020 &copy;  SIH Project
							</span>
						</div>
						
					</div>
				</div>
			</footer>

			<!-- end::Footer -->
		</div>

		<!-- end:: Page -->

		
		<!-- begin::Scroll Top -->
		<div id="m_scroll_top" class="m-scroll-top">
			<i class="la la-arrow-up"></i>
		</div>

		<!-- end::Scroll Top -->
		
		<script
		src="https://code.jquery.com/jquery-3.4.1.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
		crossorigin="anonymous"></script>

		<script type="text/javascript">
			document.getElementById('customFile').addEventListener('change',function(){
                //get the file name
                var fileName = this.value;
                //replace the "Choose a file" label
                document.querySelector('.custom-file-label').innerHTML = fileName.replace('C:\\fakepath\\', " ");
            })
		</script>
		<!--begin::Global Theme Bundle -->
		<script src="{% static 'assets/vendors/base/vendors.bundle.js' %}" type="text/javascript"></script>
		<script src="{% static 'assets/demo/default/base/scripts.bundle.js' %}" type="text/javascript"></script>
		<script src="{% static 'assets/demo/default/base/wizard.js' %}" type="text/javascript"></script>

		<!--end::Global Theme Bundle -->

		<!--begin::Page Vendors -->
		<script src="{% static 'assets/vendors/custom/fullcalendar/fullcalendar.bundle.js' %}" type="text/javascript"></script>

		<!--end::Page Vendors -->

		<!--begin::Page Scripts -->
		<script src="{% static 'assets/app/js/dashboard.js' %}" type="text/javascript"></script>

		<script>
			function upload(event) {
				event.preventDefault();
				var data = new FormData($('.m-form').get(0));
				var name = data.get('name');
				var description = data.get('description');
				var key = data.get('key');
				var file = !$('input[type="file"]').val();
				var aspects = data.get("aspects");
				if(name !== "" && description !== "" && key !== "" && !file && aspects !== "") {
					$.ajax({
						url: "/projects/create/",
						type: "POST",
						data: data,
						cache: false,
						processData: false,
						contentType: false,
						success: async function(data) {
							console.log(data);
							document.getElementsByClassName("m-form")[0].reset();
							document.querySelector('.custom-file-label').innerHTML = "Choose File";
							await swal({
								type:'success',
								title: 'Success',
								text: "Project created successfully!"
							})
							window.location.href = "http://127.0.0.1:8000/projects/";
						}
					});
				} else {
					swal({type:'error', title:'OOPS :(', text: 'All Fields are mandatory'})
				}
				return false;
					}
					
				$(function() {
					$('#submit').click(upload);
				});
		</script>
		<script>
		function logout() {
			document.getElementById('logout').submit();
		}
	</script>

		<!--end::Page Scripts -->
	</body>

	<!-- end::Body -->
</html>