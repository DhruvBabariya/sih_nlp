{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %} | Single Review Analysis{% endblock %}
{% block content %}
				<!-- END: Left Aside -->
				<div class="m-grid__item m-grid__item--fluid m-wrapper">

					<!-- BEGIN: Subheader --
					<div class="m-subheader ">
						<div class="d-flex align-items-center">
							<div class="mr-auto">
								<h3 class="m-subheader__title ">Create Project</h3>
							</div>
						</div>
					</div>

					<!-- END: Subheader -->
					<div class="m-content">
						<div class="row">
							<div class="col-lg-12">

								<!--begin::Portlet-->
								<div class="m-portlet">
									<div class="m-portlet__head">
										<div class="m-portlet__head-caption">
											<div class="m-portlet__head-title">
												<span class="m-portlet__head-icon m--hide">
													<i class="la la-gear"></i>
												</span>
												<h3 class="m-portlet__head-text">
													Review Project
												</h3>
											</div>
										</div>
									</div>

									<!--begin::Form-->
									<form class="m-form" method="POST">
										{% csrf_token %}
										<div class="m-portlet__body">
											<div class="m-form__section m-form__section--first">
												<div class="form-group m-form__group">
													<label>Enter review:</label>
                                                    <textarea required style="font-family: 'Poppins';" name="sentence" cols="40" rows="10" id="description" placeholder="Enter review..." class="form-control m-input"></textarea>
												</div>
												
											</div>
											<div style="display: hidden;" id="analytics"></div>
											</div>
											<div class="m-portlet__foot m-portlet__foot--fit">
											<div class="m-form__actions m-form__actions">
												<button type="submit" class="btn btn-primary">Submit</button>
												
											</div>
										</div>
										</div>
									</form>

									<!--end::Form-->
								</div>

								<!--end::Portlet-->
							</div>
							
						</div>
					</div>
					
				</div>
			</div>

			<!-- end:: Body -->

{% endblock %}


{% block extrajs %}
<script
src="https://code.jquery.com/jquery-3.4.1.min.js"
integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
crossorigin="anonymous"></script>

<!-- end::Scroll Top -->
		<script>
			function uploadAjax(event) {
				event.preventDefault();
				var data = new FormData($('.m-form').get(0));
				$('#analytics').empty();
				$('#analytics').hide();
				$.ajax({
					url: "/projects/single_review",
					type: "POST",
					data: data,
					cache: false,
					processData: false,
					contentType: false,
					success: function(data) {
						$("#analytics").show();
						var parsedData = JSON.parse(data);
						if(parsedData.compound < 0) {
							$("#analytics").append(`<h4>Negative</h4>`);
						} else if(parsedData.compound > 0) {
							$("#analytics").append(`<h4>Positive</h4>`);
						}
						document.getElementsByClassName("m-form")[0].reset();
						swal(data);
					}
				});
				return false;
			}
		
		$(function() {
			$('.m-form').submit(uploadAjax);
		});
</script>	
{% endblock %}
